# 4. 机械臂逆向运动学(Manipulator Inverse Kinematics)

- 机械臂顺向运动学 Forward Kinematics (FK)
  给予 $\theta_i$ (可计算出 ${}^{i-1}_{\quad i}T$ ), 求得 $\{H\}$ 或 ${}^{W}P$
  ${}^{W}_HT = f(\theta_1, \dots, \theta_i, \dots, \theta_n )$
  ${}^{W}P = {}^{W}_{H}T{}^{H}P$
- 机械臂逆向运动学 Inverse Kinematics (IK)
  给予 $\{H\}$ 或 ${}^{W}P$ , 求得 $\theta_i$ $[\theta_1, \dots, \theta_i, \dots, \theta_n] = f^{-1}({}^{W}_{H}T)$

## 4.1 求解概念

- 假设手臂有6个DOFs
  - 6个未知的joint anles ( $\theta_i$ 或 $d_i$ , $i=1, \dots, 6$ )
- 在 ${}^{W}_{H}T$ 中撷取出含未知数的 ${}^{0}_{6}T$, 16个数字
  $$
  {}^{0}_{6}T = 
  \begin{bmatrix}
  & {}^{0}_{6}R && {}^{0}P_{6 \ org} \\
  0&0&0&1
  \end{bmatrix}=
  \begin{bmatrix}
  |&|&|&| \\
  {}^{0}\hat{X}_6 & {}^{0}\hat{Y}_6 & {}^{0}\hat{Z}_6 & {}^{0}\hat{P}_{6 \ org}\\
  |&|&|&| \\
  0&0&0&1
  \end{bmatrix}
  $$

- 求解
  - 12个非线性超越方程式 (nonlinear transcendental equations)
  - 6个未知数, 6个限制条件
- Reachable Workspace
  - 手臂可以用一种以上的姿态到达的位置
- Dexterous workspace
  - 手臂可以用任何的姿态到达的位置
- Subspace
  - 手臂在定义头尾的T所能达到的变动范围

## 4.2 多重解

- 解的数目
  - 由于是非线性超越方程组, 6个未知数6个方程式不代表具有唯一解
  - 是由joint数目和link参数所决定
- 若具有多重解, 解的选择方式
  - 离目前状态最近的解
    - 最快
    - 最省能
    - ....
  - 避开障碍物

## 4.3 求解方法

- 解析法(Closed-form solutions)
  - 用 ==代数algebraic== 或 ==几何geometric方法==
- 数值法 Numerical solutions
- 目前大多机械臂设计成具有解析解
  - Pieper's solution: 相邻三轴相交一点

[例题](https://www.bilibili.com/video/BV1v4411H7ez?spm_id_from=333.788.player.switch&vd_source=7aa431eece1d1c0d38afe62a0e6d152f&p=28)

- 若6-DOF manipulator 具有3个连续的轴交在同一点, 则手臂有解析解
- Positioning structure
  - 法则: 让 $\theta_1$ , $\theta_2$ , $\theta_3$ 层层分离
  $$
  {}^{i-1}_{\quad i}T=
  \begin{bmatrix} c \theta_{i} & -s \theta_{i} & 0 & a_{i-1} \\
  s \theta_{i} c \alpha_{i-1}&c \theta_{i}c \alpha_{i-1}&-s \alpha_{i-1}&-s \alpha_{i-1}d_{i} \\ s \theta_{i}s \alpha_{i-1}&c \theta_{i}s \alpha_{i-1}&c \alpha_{i-1}&c \alpha_{i-1}d_{i} \\
  0&0&0&1
  \end{bmatrix}
  $$
  $\cos \theta_i = c\theta_i = c_i$
  $\sin \theta_i = s\theta_i = s_i$
